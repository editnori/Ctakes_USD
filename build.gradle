plugins {
    id 'java'
    id 'application'
}

group = 'tools'
version = '1.0.0'

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(11)
    }
}

application {
    mainClass = 'tools.reporting.ExcelXmlReport'
}

sourceSets {
    main {
        java {
            // Compile the existing repo layout without moving files
            srcDirs = ['tools']
        }
    }
}

// Optional: include cTAKES libs on classpath if CTAKES_HOME is present
def ctakesHome = System.getenv('CTAKES_HOME') ?: (rootDir.toPath().resolve('apache-ctakes-6.0.0-bin/apache-ctakes-6.0.0').toString())
def ctakesLib = file(ctakesHome + '/lib')
dependencies {
    if (ctakesLib.exists()) {
        implementation fileTree(dir: ctakesLib, include: ['*.jar'])
    }
}

tasks.register('reportJar', Jar) {
    group = 'build'
    dependsOn tasks.classes
    archiveBaseName = 'excel-report'
    from(sourceSets.main.output)
    manifest { attributes('Main-Class': application.mainClass.get()) }
}

